-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")

-- Buat ScreenGui untuk tombol
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "JumpButtonGui"
screenGui.ResetOnSpawn = false

-- Buat tombol jump
local jumpButton = Instance.new("TextButton")
jumpButton.Name = "JumpButton"
jumpButton.Size = UDim2.new(0, 100, 0, 100)
jumpButton.Position = UDim2.new(0.85, 0, 0.7, 0)
jumpButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
jumpButton.BackgroundTransparency = 0.5
jumpButton.Text = "JUMP"
jumpButton.TextColor3 = Color3.fromRGB(0, 0, 0)
jumpButton.Font = Enum.Font.GothamBold
jumpButton.TextSize = 24
jumpButton.Parent = screenGui

-- Membuat tombol berbentuk lingkaran
local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(1, 0)
UICorner.Parent = jumpButton

-- Function untuk membuat karakter melompat
local function jump()
    local player = Players.LocalPlayer
    local character = player.Character
    if character then
        local humanoid = character:FindFirstChild("Humanoid")
        if humanoid then
            -- Cara 1: Menggunakan BodyVelocity
            local bodyVelocity = Instance.new("BodyVelocity")
            bodyVelocity.Velocity = Vector3.new(0, 50, 0) -- Kekuatan lompatan
            bodyVelocity.MaxForce = Vector3.new(0, 4000, 0)
            bodyVelocity.Parent = character.HumanoidRootPart
            
            -- Hapus BodyVelocity setelah 0.1 detik
            game:GetService("Debris"):AddItem(bodyVelocity, 0.1)
            
            -- Cara 2: Mengubah posisi langsung
            -- character.HumanoidRootPart.CFrame = character.HumanoidRootPart.CFrame + Vector3.new(0, 2, 0)
            
            -- Cara 3: Mencoba menggunakan Jump property
            humanoid.Jump = true
        end
    end
end

-- Tambahkan cooldown untuk mencegah spam
local canJump = true
local COOLDOWN_TIME = 0.5 -- 0.5 detik cooldown

local function handleJump()
    if canJump then
        canJump = false
        jump()
        
        -- Set timer untuk cooldown
        wait(COOLDOWN_TIME)
        canJump = true
    end
end

-- Event handler untuk tombol
jumpButton.MouseButton1Down:Connect(handleJump)

-- Fungsi yang dijalankan ketika player spawn
local function onPlayerAdded(player)
    if player == Players.LocalPlayer then
        screenGui.Parent = player.PlayerGui
        
        -- Enable jumping capability
        local character = player.Character or player.CharacterAdded:Wait()
        local humanoid = character:WaitForChild("Humanoid")
        humanoid.JumpPower = 50 -- Set jump power
        humanoid.JumpHeight = 7.2 -- Set jump height
    end
end

-- Menghubungkan fungsi dengan event PlayerAdded
Players.PlayerAdded:Connect(onPlayerAdded)

-- Jika player sudah ada di game
if Players.LocalPlayer then
    onPlayerAdded(Players.LocalPlayer)
end

-- Handle karakter baru ketika respawn
Players.LocalPlayer.CharacterAdded:Connect(function(character)
    local humanoid = character:WaitForChild("Humanoid")
    humanoid.JumpPower = 50
    humanoid.JumpHeight = 7.2
end)