local player = game.Players.LocalPlayer
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player:WaitForChild("PlayerGui")

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 200, 0, 300)
mainFrame.Position = UDim2.new(0.05, 0, 0.05, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.Parent = screenGui
mainFrame.Visible = true
mainFrame.Active = true
mainFrame.Draggable = true

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, 0, 0, 30)
titleLabel.Position = UDim2.new(0, 0, 0, 0)
titleLabel.Text = "Auto Functions Menu"
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
titleLabel.Parent = mainFrame

local scrollingFrame = Instance.new("ScrollingFrame")
scrollingFrame.Size = UDim2.new(1, -10, 1, -40)
scrollingFrame.Position = UDim2.new(0, 5, 0, 35)
scrollingFrame.BackgroundTransparency = 1
scrollingFrame.ScrollBarThickness = 6
scrollingFrame.ScrollBarImageColor3 = Color3.fromRGB(255, 255, 255)
scrollingFrame.Parent = mainFrame
scrollingFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
scrollingFrame.ScrollingEnabled = true
scrollingFrame.ElasticBehavior = Enum.ElasticBehavior.Always
scrollingFrame.ScrollingDirection = Enum.ScrollingDirection.Y
scrollingFrame.HorizontalScrollBarInset = Enum.ScrollBarInset.None
scrollingFrame.VerticalScrollBarInset = Enum.ScrollBarInset.ScrollBar

local minimizedButton = Instance.new("TextButton")
minimizedButton.Size = UDim2.new(0, 200, 0, 30)
minimizedButton.Position = UDim2.new(0.05, 0, 0.05, 0)
minimizedButton.Text = "Show Menu"
minimizedButton.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizedButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
minimizedButton.Parent = screenGui
minimizedButton.Visible = false
minimizedButton.Active = true
minimizedButton.Draggable = true

local listLayout = Instance.new("UIListLayout")
listLayout.Parent = scrollingFrame
listLayout.Padding = UDim.new(0, 4)
listLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
listLayout.SortOrder = Enum.SortOrder.LayoutOrder

local toggleStates = {
    clickActive = false,
    buyActive = false,
    rebirthActive = false,
    teleportActive = false,
    autoCraftActive = false,
    autoClaimActive = false,
    autoSpinActive = false,
    autoGingerBuyActive = false,
    reindeerEggActive = false,
    snowglobeEggActive = false
}

local currentRebirthValue = 1

local function createButton(text, layoutOrder)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0.95, 0, 0, 30)
    button.Text = text
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    button.LayoutOrder = layoutOrder
    button.Parent = scrollingFrame
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 4)
    corner.Parent = button
    
    return button
end

local function createInputField(placeholder, layoutOrder)
    local inputBox = Instance.new("TextBox")
    inputBox.Size = UDim2.new(0.95, 0, 0, 25)
    inputBox.Text = "1"
    inputBox.PlaceholderText = placeholder
    inputBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    inputBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    inputBox.LayoutOrder = layoutOrder
    inputBox.Parent = scrollingFrame
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 4)
    corner.Parent = inputBox
    
    return inputBox
end

local function toggleButton(button, isActive, activeText, inactiveText)
    button.Text = isActive and activeText or inactiveText
    button.BackgroundColor3 = isActive and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(50, 50, 50)
end

local function teleportToObjects()
    local storageFolder = workspace.Scripts.CollectGingerbread.Storage
    local player = game.Players.LocalPlayer
    local storageItems = storageFolder:GetChildren()
    
    if #storageItems == 0 then return end
    
    for _, storageItem in pairs(storageItems) do
        if storageItem.PrimaryPart and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            player.Character:SetPrimaryPartCFrame(storageItem.PrimaryPart.CFrame)
            task.wait()
        end
    end
end

local function autoClick()
    while toggleStates.clickActive do
        game:GetService("ReplicatedStorage"):WaitForChild("Events"):WaitForChild("Click4"):FireServer()
        task.wait()
    end
end

local function autoBuy()
    while toggleStates.buyActive do
        game:GetService("ReplicatedStorage"):WaitForChild("Functions"):WaitForChild("Upgrade"):InvokeServer("RebirthButtons")
        task.wait()
    end
end

local function autoRebirth()
    while toggleStates.rebirthActive do
        game:GetService("ReplicatedStorage"):WaitForChild("Events"):WaitForChild("Rebirth"):FireServer(currentRebirthValue)
        task.wait()
    end
end

local function autoOpenReindeerEggs()
    while toggleStates.reindeerEggActive do
        game:GetService("ReplicatedStorage"):WaitForChild("Functions"):WaitForChild("Unbox"):InvokeServer("Reindeer", "Triple")
        task.wait()
    end
end

local function autoOpenSnowglobeEggs()
    while toggleStates.snowglobeEggActive do
        game:GetService("ReplicatedStorage"):WaitForChild("Functions"):WaitForChild("Unbox"):InvokeServer("Snowglobe", "Triple")
        task.wait()
    end
end

local function autoCraftAll()
    while toggleStates.autoCraftActive do
        game:GetService("ReplicatedStorage"):WaitForChild("Functions"):WaitForChild("Request"):InvokeServer("CraftAll", {})
        task.wait()
    end
end

local function autoClaim()
    while toggleStates.autoClaimActive do
        for i = 1, 12 do
            if not toggleStates.autoClaimActive then break end
            game:GetService("ReplicatedStorage"):WaitForChild("Functions"):WaitForChild("ClaimPlaytimeReward"):InvokeServer(i)
            task.wait(1)
        end
        task.wait(5)
    end
end

local function autoSpin()
    while toggleStates.autoSpinActive do
        game:GetService("ReplicatedStorage"):WaitForChild("Functions"):WaitForChild("GingerbreadWheel"):InvokeServer()
        task.wait()
    end
end

local function autoGingerBuy()
    while toggleStates.autoGingerBuyActive do
        game:GetService("ReplicatedStorage"):WaitForChild("Functions"):WaitForChild("BuyGingerbreadPassTier"):InvokeServer()
        task.wait()
    end
end

local teleportButton = createButton("Teleport to Objects (Inactive)", 1)
local clickButton = createButton("Auto Click", 2)
local autoBuyButton = createButton("Auto Buy", 3)
local rebirthInput = createInputField("Enter Rebirth Value", 4)
local rebirthButton = createButton("Auto Rebirth", 5)
local reindeerEggButton = createButton("Auto Open Reindeer Eggs", 6)
local snowglobeEggButton = createButton("Auto Open Snowglobe Eggs", 7)
local autoCraftButton = createButton("Auto Craft All", 8)
local autoClaimButton = createButton("Auto Claim", 9)
local autoSpinButton = createButton("Auto Spin", 10)
local autoGingerBuyButton = createButton("Auto Ginger Buy", 11)
local hideButton = createButton("Hide Menu", 12)

teleportButton.MouseButton1Click:Connect(function()
    toggleStates.teleportActive = not toggleStates.teleportActive
    toggleButton(teleportButton, toggleStates.teleportActive, "Teleport to Objects (Active)", "Teleport to Objects (Inactive)")
    if toggleStates.teleportActive then
        spawn(function()
            while toggleStates.teleportActive do
                teleportToObjects()
                task.wait(1)
            end
        end)
    end
end)

clickButton.MouseButton1Click:Connect(function()
    toggleStates.clickActive = not toggleStates.clickActive
    toggleButton(clickButton, toggleStates.clickActive, "Auto Click (Active)", "Auto Click (Inactive)")
    if toggleStates.clickActive then spawn(autoClick) end
end)

autoBuyButton.MouseButton1Click:Connect(function()
    toggleStates.buyActive = not toggleStates.buyActive
    toggleButton(autoBuyButton, toggleStates.buyActive, "Auto Buy (Active)", "Auto Buy (Inactive)")
    if toggleStates.buyActive then spawn(autoBuy) end
end)

rebirthButton.MouseButton1Click:Connect(function()
    toggleStates.rebirthActive = not toggleStates.rebirthActive
    toggleButton(rebirthButton, toggleStates.rebirthActive, "Auto Rebirth (Active)", "Auto Rebirth (Inactive)")
    if toggleStates.rebirthActive then 
        currentRebirthValue = tonumber(rebirthInput.Text) or 1
        spawn(autoRebirth) 
    end
end)

reindeerEggButton.MouseButton1Click:Connect(function()
    toggleStates.reindeerEggActive = not toggleStates.reindeerEggActive
    toggleButton(reindeerEggButton, toggleStates.reindeerEggActive, "Auto Open Reindeer Eggs (Active)", "Auto Open Reindeer Eggs")
    if toggleStates.reindeerEggActive then spawn(autoOpenReindeerEggs) end
end)

snowglobeEggButton.MouseButton1Click:Connect(function()
    toggleStates.snowglobeEggActive = not toggleStates.snowglobeEggActive
    toggleButton(snowglobeEggButton, toggleStates.snowglobeEggActive, "Auto Open Snowglobe Eggs (Active)", "Auto Open Snowglobe Eggs")
    if toggleStates.snowglobeEggActive then spawn(autoOpenSnowglobeEggs) end
end)

autoCraftButton.MouseButton1Click:Connect(function()
    toggleStates.autoCraftActive = not toggleStates.autoCraftActive
    toggleButton(autoCraftButton, toggleStates.autoCraftActive, "Auto Craft All (Active)", "Auto Craft All (Inactive)")
    if toggleStates.autoCraftActive then spawn(autoCraftAll) end
end)

autoClaimButton.MouseButton1Click:Connect(function()
    toggleStates.autoClaimActive = not toggleStates.autoClaimActive
    toggleButton(autoClaimButton, toggleStates.autoClaimActive, "Auto Claim (Active)", "Auto Claim (Inactive)")
    if toggleStates.autoClaimActive then spawn(autoClaim) end
end)

autoSpinButton.MouseButton1Click:Connect(function()
    toggleStates.autoSpinActive = not toggleStates.autoSpinActive
    toggleButton(autoSpinButton, toggleStates.autoSpinActive, "Auto Spin (Active)", "Auto Spin (Inactive)")
    if toggleStates.autoSpinActive then spawn(autoSpin) end
end)

autoGingerBuyButton.MouseButton1Click:Connect(function()
    toggleStates.autoGingerBuyActive = not toggleStates.autoGingerBuyActive
    toggleButton(autoGingerBuyButton, toggleStates.autoGingerBuyActive, "Auto Ginger Buy (Active)", "Auto Ginger Buy (Inactive)")
    if toggleStates.autoGingerBuyActive then spawn(autoGingerBuy) end
end)

hideButton.MouseButton1Click:Connect(function()
    mainFrame.Visible = false
    minimizedButton.Visible = true
    minimizedButton.Position = mainFrame.Position
end)

minimizedButton.MouseButton1Click:Connect(function()
    mainFrame.Visible = true
    minimizedButton.Visible = false
    mainFrame.Position = minimizedButton.Position
end)

local function addCornerRadius(instance)
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 4)
    corner.Parent = instance
end

addCornerRadius(mainFrame)
addCornerRadius(minimizedButton)
addCornerRadius(titleLabel)
